pipeline
	{
		agent any
			stages
			{
					stage('compile-stage')
					{
					  steps	
					  {	
						 withMaven(maven:'Maven_3_3_9')
						 {
							sh 'mvn -f employee_management/pom.xml clean compile'
						 }
					   }	 
					}	
					stage('Testing-stage')
					{
					  steps
					  {
						withMaven(maven:'Maven_3_3_9')
						{
							sh 'mvn -f employee_management/pom.xml test'
						}
					   }	
					} 
					stage('Build-stage')
					{
					   steps
					   {
						 withMaven(maven:'Maven_3_3_9')
						 {
							sh 'mvn -f employee_management/pom.xml package docker:build'
						 }
					   } 
					}  
					 stage('Image') 
					 {
					 	steps
					 	{
            				dir ('discovery-service') 
            				{
               					 sh 'docker build -t demoimage .'
            				}
        				}
        			} 
			} 
	}		